{% extends 'base.html' %}
{% block content %}
<div class="spacer" style="margin-top: 120px;"></div>
<div class="container-fluid mt-5">
   <div class="card">
      <div class="card-header">
         <h2>
            {% if selected_package %}
            <p>Booking For: {{ selected_package.name }} Package</p>
            {% endif %} </h>
      </div>
      <div class="card-body">
         <form method="post" action="{% url 'package_booking' id=selected_package.id %}">
            {% csrf_token %}
            <div class="mb-3">
               <label for="" class="form-label">Company Name</label>
               <input type="text" name="cname" id="" class="form-control" placeholder="" />
            </div>

            <div class="mb-3">
               <label for="" class="form-label">Company Address</label>
               <input type="text" name="cadd" id="" class="form-control" placeholder="" />
            </div>
            <div class="form-group">
               <label for="date">Date</label>
               <input type="date" class="form-control" id="date" name="date" placeholder="Enter your date">
            </div>
            <button type="submit" class="mt-3 btn btn-primary">Submit</button>
         </form>
      </div>
   </div>
   <script>
      window.onload = function () {
         var now = new Date();
         var hours = String(now.getHours()).padStart(2, '0');
         var minutes = String(now.getMinutes()).padStart(2, '0');

         var currentTime = hours + ':' + minutes;
         document.getElementById("time").setAttribute("min", currentTime);

         var today = new Date();
         var dd = String(today.getDate()).padStart(2, '0');
         var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
         var yyyy = today.getFullYear();

         today = yyyy + '-' + mm + '-' + dd;
         document.getElementById("date").setAttribute("min", today);

         document.getElementById("date").addEventListener("change", function () {
            if (this.value === today) {
               document.getElementById("time").setAttribute("min", currentTime);
            } else {
               document.getElementById("time").removeAttribute("min");
            }
         });
      }
   </script>

   {% endblock %}